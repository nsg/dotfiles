---

- set_fact:
    user_email: >-
      {% if ansible_hostname | regex_search("^L") %}
      stefan.berggren@{{ ansible_domain }}
      {% else %}
      {{ 'nsg' + '@' + 'nsg' + '.cc' }}
      {% endif %}

- name: Make directories
  file:
    path: "~/.{{ item }}"
    state: directory
  loop:
    - mplayer
    - config
    - config/nvim
    - config/yamllint
    - config/bashrc

- name: "Deploy files (copy)"
  copy:
    src: "configure/files/{{ item }}"
    dest: "~/.{{ item }}"
  loop:
    - bashrc
    - inputrc
    - config/nvim/init.vim
    - config/yamllint/config
    - mplayer/config
    - gitignore

- name: "Deploy files (template)"
  template:
    src: "configure/files/{{ item }}.j2"
    dest: "~/.{{ item }}"
  loop:
    - gitconfig

- name: "Deploy directories (copy)"
  copy:
    src: "configure/files/{{ item.src }}"
    dest: "~/.{{ item.dest }}"
  loop:
    - src: config/bashrc
      dest: config/
